#include <pch.hpp>
#include <Window.hpp>
#include <Scene.hpp>



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// *structors
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
::rts::Window::Window()
    : m_window{ ::sf::VideoMode::getDesktopMode(), "RoadToSuccess", ::sf::Style::Fullscreen }
{}

///////////////////////////////////////////////////////////////////////////
::rts::Window::~Window() = default;


///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Actions
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
void ::rts::Window::display()
{
    m_window.display();
}

///////////////////////////////////////////////////////////////////////////
void ::rts::Window::clear()
{
    m_window.clear();
}

///////////////////////////////////////////////////////////////////////////
[[ nodiscard ]] auto ::rts::Window::isOpen()
    -> bool
{
    return m_window.isOpen();
}

///////////////////////////////////////////////////////////////////////////
void ::rts::Window::close()
{
    m_window.close();
}

///////////////////////////////////////////////////////////////////////////
void ::rts::Window::handleEvents(
    ::rts::Scene& scene
)
{
    sf::Event event;
    while (m_window.pollEvent(event)) {
        if (!scene.handleEvent(event)) {
            break;
        }
    }
}
